# 📊 تقرير شامل عن نظام PayPass

## 🏗️ نظرة عامة على النظام

نظام PayPass هو تطبيق متكامل لإدارة خدمات غسيل السيارات، يتكون من:
- **Frontend**: تطبيق React.js مع Vite
- **Backend**: Node.js مع Express.js
- **Database**: MongoDB Atlas
- **Admin Dashboard**: تطبيق منفصل لإدارة النظام

---

## 🚗 أنواع السيارات وأحجامها

### أحجام السيارات المدعومة:

#### 1. السيارات الصغيرة (Small)
- **السعر الأساسي**: 30 ريال للغسلة الواحدة
- **معامل السعر**: 1.0x
- **أمثلة**: تويوتا ياريس، هوندا سيفيك، نيسان سنترا، هيونداي أكسنت
- **الوصف**: سيارات صغيرة مناسبة للاستخدام اليومي

#### 2. السيارات المتوسطة (Medium)
- **السعر الأساسي**: 40 ريال للغسلة الواحدة
- **معامل السعر**: 1.33x
- **أمثلة**: تويوتا كامري، هوندا أكورد، نيسان ألتيما، هيونداي سوناتا
- **الوصف**: سيارات متوسطة الحجم مناسبة للعائلات

#### 3. السيارات الكبيرة (Large)
- **السعر الأساسي**: 50 ريال للغسلة الواحدة
- **معامل السعر**: 1.67x
- **أمثلة**: تويوتا لاند كروزر، نيسان باترول، شيفروليه تاهو، فورد إكسبيديشن
- **الوصف**: سيارات كبيرة وSUV مناسبة للرحلات الطويلة

---

## 🏢 أماكن المغاسل (الفروع)

### المغاسل المتاحة في الرياض:

#### 1. مغسلة الرياض الأولى
- **العنوان**: الرياض، شارع الملك فهد، حي النزهة
- **الهاتف**: +966501234567
- **ساعات العمل**: 24/7
- **التقييم**: 4.5/5
- **عدد العملاء**: 150
- **الطلبات النشطة**: 8
- **رابط خرائط جوجل**: https://maps.app.goo.gl/hD3KYnFEgx9pEXBu6?g_st=iw

#### 2. مغسلة الرياض الثانية
- **العنوان**: الرياض، شارع التحلية، حي السليمانية
- **الهاتف**: +966501234568
- **ساعات العمل**: 24/7
- **التقييم**: 4.3/5
- **عدد العملاء**: 120
- **الطلبات النشطة**: 6
- **رابط خرائط جوجل**: https://maps.app.goo.gl/khhqHgaRFZXqELYTA?g_st=iw

#### 3. مغسلة الرياض الثالثة
- **العنوان**: الرياض، شارع العليا، حي العليا
- **الهاتف**: +966501234569
- **ساعات العمل**: 24/7
- **التقييم**: 4.7/5
- **عدد العملاء**: 180
- **الطلبات النشطة**: 12
- **رابط خرائط جوجل**: https://maps.app.goo.gl/uB82K6Tj8jsPmXFeA?g_st=iw

#### 4. مغسلة الرياض الرابعة
- **العنوان**: الرياض، شارع الملك عبدالله، حي الملقا
- **الهاتف**: +966501234570
- **ساعات العمل**: 24/7
- **التقييم**: 4.4/5
- **عدد العملاء**: 140
- **الطلبات النشطة**: 9
- **رابط خرائط جوجل**: https://maps.app.goo.gl/VY5rRk7oLZ2YpSmb7?g_st=iw

---

## 📦 الباقات والأسعار

### 1. الباقة الأساسية
- **الوصف**: الخيار المثالي لمن يبحث عن نظافة أساسية مع توفير إضافي!
- **المدة**: 30 يوم
- **المتاحة في**: جميع المغاسل
- **المميزات**:
  - 4 غسلات باستخدام صابون إيطالي فاخر عالي الجودة
  - غسيل بطبقتين من الصابون لضمان نظافة عميقة ولمعان يدوم
  - غسلة إضافية مجانية، ليصبح إجمالي الغسلات: 5
  - إجمالي التوفير: 85 ريال سعودي

**الأسعار حسب حجم السيارة**:
- صغيرة: 150 ريال
- متوسطة: 200 ريال
- كبيرة: 250 ريال

### 2. الباقة المتقدمة ⭐ (الأكثر شعبية)
- **الوصف**: الخيار العملي للنظافة المثالية بسعر تنافسي
- **المدة**: 30 يوم
- **المتاحة في**: جميع المغاسل
- **المميزات**:
  - 8 غسلات باستخدام صابون إيطالي فاخر يمنح سيارتك العناية التي تستحقها
  - غسيل بطبقتين من الصابون لضمان نظافة عميقة ولمعان يدوم
  - غسلتان مجانيتان، ليصبح إجمالي الغسلات: 10
  - إجمالي التوفير: 140 ريال سعودي

**الأسعار حسب حجم السيارة**:
- صغيرة: 280 ريال
- متوسطة: 370 ريال
- كبيرة: 470 ريال

### 3. الباقة الشاملة
- **الوصف**: الخيار الأمثل لمن يريد العناية القصوى بسياراته مع أكبر قدر من التوفير
- **المدة**: 30 يوم
- **المتاحة في**: جميع المغاسل
- **المميزات**:
  - 14 غسلة باستخدام صابون إيطالي فاخر يوفر عناية فائقة بسيارتك
  - غسيل بطبقتين من الصابون لضمان إزالة الأوساخ بفعالية وحماية طويلة الأمد
  - 4 غسلات مجانية، ليصبح إجمالي الغسلات: 18
  - إجمالي التوفير: 280 ريال سعودي

**الأسعار حسب حجم السيارة**:
- صغيرة: 490 ريال
- متوسطة: 650 ريال
- كبيرة: 820 ريال

### 4. الباقة VIP
- **الوصف**: الباقة المميزة للعملاء الأوفياء مع أفضل الخدمات والامتيازات
- **المدة**: 7 أيام
- **المتاحة في**: الفنادق فقط
- **المميزات**:
  - غسلة واحدة باستخدام أفضل أنواع الصابون الإيطالي الفاخر
  - غسيل بثلاث طبقات من الصابون لضمان نظافة استثنائية
  - خدمة VIP مع أولوية في الطوابير
  - إجمالي التوفير: 50 ريال سعودي
  - **سعر ثابت مع جميع أحجام السيارات**: 150 ريال

---

## 🔍 نظام QR Code الشامل

### المكونات الرئيسية:

#### 1. QRCodeScanner.jsx
- **الوظيفة**: مسح رموز QR للتحقق من صحة الباقات
- **المميزات**:
  - استخدام كاميرا الهاتف للمسح
  - التحقق التلقائي من صلاحية الباقة
  - عرض تفاصيل الباقة والعميل
  - إمكانية استخدام الغسلة مباشرة
  - تحميل ومشاركة رمز QR

#### 2. AdvancedQRSystem.jsx
- **الوظيفة**: إنشاء وإدارة رموز QR للباقات
- **المميزات**:
  - إنشاء رمز QR فريد لكل باقة
  - تتبع عدد الغسلات المتبقية
  - حساب الأيام المتبقية للصلاحية
  - سجل استخدام الباقة
  - تحميل ومشاركة رمز QR

#### 3. QRBranchSelector.jsx
- **الوظيفة**: اختيار الفرع لاستخدام الباقة
- **المميزات**:
  - عرض جميع الفروع المتاحة
  - تحديد أقرب فرع للمستخدم
  - عرض معلومات الاتصال والموقع
  - ربط مباشر مع خرائط جوجل

### وظائف QR Code API:

#### 1. إنشاء رمز QR
```javascript
qrAPI.generate(data)
```
- إنشاء رمز QR فريد لكل باقة
- تضمين معلومات العميل والسيارة والباقة

#### 2. مسح رمز QR
```javascript
qrAPI.scan(qrData)
```
- قراءة رمز QR والتحقق من صحته
- استخراج معلومات الباقة والعميل

#### 3. التحقق من صحة رمز QR
```javascript
qrAPI.validate(qrCode)
```
- التحقق من صلاحية الباقة
- التحقق من عدد الغسلات المتبقية
- التحقق من تاريخ انتهاء الصلاحية

#### 4. جلب حالة رمز QR
```javascript
qrAPI.getStatus(orderId)
```
- عرض حالة الباقة الحالية
- عدد الغسلات المتبقية
- تاريخ آخر استخدام

#### 5. استخدام رمز QR
```javascript
qrAPI.use(operationId, branchId)
```
- تسجيل استخدام الغسلة
- تحديث عدد الغسلات المتبقية
- تسجيل الفرع المستخدم

### بنية بيانات رمز QR:
```javascript
{
  operationId: "O12345678",
  packageType: "basic",
  packageName: "الباقة الأساسية",
  carType: "متوسط",
  customerName: "اسم العميل",
  customerPhone: "رقم الهاتف",
  remainingWashes: 5,
  totalWashes: 5,
  price: 150,
  branchName: "اسم الفرع",
  branchId: "BR001",
  startDate: "2024-01-01T00:00:00.000Z",
  expiryDate: "2024-01-31T00:00:00.000Z",
  packageStatus: "active",
  lastUsed: null,
  usageHistory: []
}
```

---

## 🛠️ المكونات التقنية

### Frontend Components:

#### 1. مكونات الباقات
- `PackagesSection.jsx`: عرض جميع الباقات المتاحة
- `PackageDetails.jsx`: تفاصيل الباقة المختارة
- `EnhancedPackagesSection.jsx`: عرض متقدم للباقات

#### 2. مكونات الفروع
- `Branches.jsx`: عرض جميع الفروع
- `SingleBranch.jsx`: تفاصيل فرع واحد
- `BranchesMap.jsx`: خريطة تفاعلية للفروع
- `BranchManager.jsx`: إدارة الفروع (للأدمن)

#### 3. مكونات الدفع
- `Payment.jsx`: معالج الدفع
- `PaymentMethods.jsx`: طرق الدفع المتاحة
- `ApplePayButton.jsx`: دفع آبل باي

#### 4. مكونات التتبع
- `LiveWashingTracker.jsx`: تتبع الغسيل المباشر
- `WashingTracking.jsx`: تتبع حالة الغسيل

#### 5. مكونات المستخدم
- `UserProfile.jsx`: ملف المستخدم
- `OrderHistory.jsx`: سجل الطلبات
- `Signup.jsx`: تسجيل حساب جديد
- `Login.jsx`: تسجيل الدخول

### API Services:

#### 1. Authentication API
- تسجيل الدخول والخروج
- إدارة المستخدمين
- إعادة تعيين كلمة المرور

#### 2. Package API
- جلب جميع الباقات
- جلب باقة محددة
- جلب الباقات حسب النوع

#### 3. Branch API
- جلب جميع الفروع
- جلب فرع محدد
- جلب الفروع حسب المدينة

#### 4. Order API
- إنشاء طلب جديد
- جلب طلبات المستخدم
- تحديث حالة الطلب
- إلغاء الطلب

#### 5. Payment API
- إنشاء دفعة
- التحقق من الدفع
- استرداد الدفع

#### 6. Car API
- إضافة سيارة
- جلب سيارات المستخدم
- تحديث بيانات السيارة

#### 7. Notification API
- إرسال إشعارات
- تحديث حالة الإشعارات
- حذف الإشعارات

---

## 📱 الصفحات الرئيسية

### 1. الصفحة الرئيسية
- عرض الباقات المميزة
- إحصائيات النظام
- روابط سريعة

### 2. صفحة الباقات
- عرض جميع الباقات
- مقارنة الأسعار
- اختيار حجم السيارة

### 3. صفحة الفروع
- خريطة تفاعلية
- معلومات الاتصال
- ساعات العمل

### 4. صفحة التتبع
- حالة الطلب الحالي
- سجل الطلبات السابقة
- إشعارات التحديث

### 5. صفحة الملف الشخصي
- معلومات المستخدم
- سيارات المستخدم
- إعدادات الحساب

### 6. صفحة الدفع
- اختيار طريقة الدفع
- تأكيد الطلب
- إنشاء رمز QR

---

## 🔧 التقنيات المستخدمة

### Frontend:
- **React.js 18.3.1**: إطار العمل الرئيسي
- **Vite 7.0.0**: أداة البناء والتطوير
- **Tailwind CSS 3.4.1**: إطار العمل للتصميم
- **Framer Motion 12.23.5**: مكتبة الحركات
- **React Router DOM 7.7.0**: إدارة التنقل
- **Axios 1.11.0**: طلبات HTTP
- **QRCode.react 4.2.0**: إنشاء رموز QR
- **Ant Design 5.26.6**: مكونات واجهة المستخدم
- **Recharts 3.1.0**: الرسوم البيانية

### Backend:
- **Node.js**: بيئة التشغيل
- **Express.js**: إطار العمل
- **MongoDB**: قاعدة البيانات
- **Mongoose**: ODM للمونجو
- **JWT**: المصادقة
- **CORS**: إدارة الطلبات المتقاطعة

### Database Collections:
- `users`: بيانات المستخدمين
- `packages`: الباقات المتاحة
- `washingplaces`: الفروع والمغاسل
- `cars`: سيارات المستخدمين
- `orders`: الطلبات
- `payments`: المدفوعات
- `carsizes`: أحجام السيارات
- `notifications`: الإشعارات

---

## 🚀 المميزات المتقدمة

### 1. نظام التتبع المباشر
- تتبع حالة الغسيل في الوقت الفعلي
- إشعارات فورية عند اكتمال الغسيل
- سجل مفصل لجميع العمليات

### 2. نظام الدفع المتعدد
- دفع آبل باي
- البطاقات الائتمانية
- المحافظ الإلكترونية

### 3. نظام الإشعارات
- إشعارات فورية
- إشعارات مجدولة
- إشعارات مخصصة

### 4. نظام التقييم والمراجعات
- تقييم الخدمة
- مراجعات العملاء
- نظام الشكاوى

### 5. نظام الإحصائيات
- إحصائيات المبيعات
- تقارير الأداء
- تحليلات العملاء

---

## 📊 الإحصائيات والتقارير

### إحصائيات النظام:
- **عدد المستخدمين النشطين**: متغير
- **عدد الطلبات اليومية**: متغير
- **معدل رضا العملاء**: 4.5/5
- **عدد الفروع**: 4 فروع في الرياض
- **عدد الباقات المتاحة**: 4 باقات

### تقارير الأداء:
- تقرير المبيعات الشهرية
- تقرير أداء الفروع
- تقرير رضا العملاء
- تقرير استخدام الباقات

---

## 🔒 الأمان والحماية

### 1. المصادقة والتفويض
- JWT tokens للمصادقة
- تشفير كلمات المرور
- إدارة الجلسات

### 2. حماية البيانات
- تشفير البيانات الحساسة
- حماية من هجمات SQL Injection
- حماية من XSS attacks

### 3. مراقبة النظام
- سجلات الأمان
- مراقبة الأداء
- تنبيهات الأمان

---

## 📱 التوافق والاستجابة

### الأجهزة المدعومة:
- الهواتف الذكية (iOS/Android)
- الأجهزة اللوحية
- أجهزة الكمبيوتر
- المتصفحات الحديثة

### الميزات المتقدمة:
- تصميم متجاوب
- وضع عدم الاتصال
- دفع آبل باي
- مسح QR code

---

## 🎯 الخلاصة

نظام PayPass هو تطبيق متكامل ومتطور لإدارة خدمات غسيل السيارات، يتميز بـ:

1. **سهولة الاستخدام**: واجهة بسيطة وواضحة
2. **المرونة**: دعم أحجام مختلفة من السيارات
3. **الموثوقية**: نظام QR code آمن وموثوق
4. **التتبع**: تتبع مباشر لجميع العمليات
5. **الأمان**: حماية شاملة للبيانات
6. **التوسع**: قابل للتوسع والتطوير

النظام جاهز للاستخدام التجاري ويمكن تطويره وإضافة ميزات جديدة حسب الحاجة. 